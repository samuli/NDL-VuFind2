<?
  $this->headScript()->appendFile("finna-organisation-info.js");
  $this->headScript()->appendFile("finna-organisation-info-widget.js");
?>
<div class="organisation-info" data-parent="<?=$this->escapeHtmlAttr($this->id)?>" data-target="<?=$this->escapeHtmlAttr($this->target)?>" data-init="<?=$this->target == 'widget' ? '1' : '0'?>"<?=!empty($this->buildings) ? (' data-buildings="' . implode(',', $this->buildings) . '"') : ''?>>
<? if ($this->target == 'widget'): ?>
  <div class="row">
    <div class="col-xs-12">
      <h2><?=$this->transEsc('organisation-info-title');?></h2>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <div class="loader"><i class="fa fa-spin fa-spinner"></i></div>
    </div>
  </div>
  <div class="row content hide">
    <div class="col-md-8 col-lg-7 col-xs-12 info">
      <h4>
        <div class="organisation-dropdown-holder">
          <div name="organisation" class="organisation dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><input type="hidden"></input><span></span><i class="fa fa-arrow-down"></i></a>
              <ul class="dropdown-menu" role="menu">
              </ul>
          </div>
        </div>
        <span class="is-open open info-element"><?=$this->translate('organisation-info-is-open')?></span>
        <span class="is-open closed info-element"><?=$this->translate('organisation-info-is-closed')?></span>
      </h4>
<? endif ?>
      <div class="info schedules">
        <div class="week-navi-holder">
          <i class="fa fa-arrow-left prev-week week-navi" data-dir="-1"></i>
          <span class="week-text"><?=$this->translate('organisation-info-schedule-week')?> <span class="num"></span></span>
          <i class="fa fa-arrow-right next-week week-navi" data-dir="+1"></i>
        </div>
        <div class="loader"><i class="fa fa-spin fa-spinner"></i></div>

        <div class="content">
          <div class="opening-times-week">
            <div class="day-container template hide"></div>

            <div class="time-row template hide">
              <div class="cell date"></div>
              <div class="cell description">
                <span class="name"></span><span class="name-staff"><?=$this->translate('organisation-info-schedule-staff')?></span><span class="info"></span><span class="selfservice-only hide"><?=$this->translate('organisation-info-only-selfservice')?></span>
              </div>
              <div class="cell time-container">
                <div class="cell time-template">
                  <span class="period"><span class="opens"></span> - <span class="closes"></span></span>
                  <span class="closed-today hide"><?=$this->translate('organisation-info-is-closed')?></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="no-schedules info-element"><?=$this->translate('organisation-info-no-schedule')?></div>
        <div class="mobile-schedule-link-template hide"><a href="#"></a></div>
        <div class="mobile-schedules info-element"></div>
      </div>
      <div class="schedules-info info-element"></div>
<? if ($this->target == 'widget'): ?>
    </div>
    <div class="col-md-4 col-lg-5 col-xs-12">
      <a href="#" target="_blank" class="facility details"><img src="<?=$this->imageLink('noCover2.gif')?>" alt="" class="facility-image"></a>
      <div class="contact-links">
        <a href="#" class="email info-element"><span class="btn btn-open-widget"><i class="fa fa-at"></i><span class="sr-only"><?=$this->transEsc('organisation-info-email') ?></span></span></a>
        <span class="btn btn-open-widget phone info-element" data-toggle="tooltip" data-placement="bottom" data-html="true" data-original-title=""><i class="fa fa-phone-square"></i><span class="sr-only"><?=$this->transEsc('organisation-phone-numbers') ?></span></span></a>
        <a href="#" target="_blank" class="route info-element"><span class="btn"><i class="fa fa-bus"></i><span class="sr-only"><?=$this->transEsc('organisation-info-route') ?></span></span></a>
        <a href="#" target="_blank" class="facebook info-element"><span class="btn"><i class="fa fa-facebook-square"></i><span class="sr-only"><?=$this->transEsc('organisation-info-facebook') ?></span></span></a>
      </div>
      <div class="map info-element"><a href="#" target="_blank"><i class="fa fa-map-marker"></i> <span class="map-address"></span></a></div>
      <div class="details-link info-element"><a href="#" data-href="<?=$this->escapeHtmlAttr($this->url('content-page', ['page' => 'organisation']))?>" class="details"><i class="fa fa-home"></i> <?=$this->translate('organisation-info-more-info')?></a></div>
      <div class="services">
        <span class="btn btn-open-widget btn-round service-wifi info-element" title="<?=$this->translate('organisation-info-service-wifi')?>">
          <i class="fa fa-wifi"></i>
          <span class="sr-only"><?=$this->transEsc('organisation-info-service-wifi') ?></span>
        </span>
        <span class="btn btn-open-widget btn-round service-print info-element" title="<?=$this->translate('organisation-info-service-print')?>">
          <i class="fa fa-print"></i>
          <span class="sr-only"><?=$this->transEsc('organisation-info-service-print') ?></span>
        </span>
      </div>
    </div>
  </div>
<? endif ?>
</div>
