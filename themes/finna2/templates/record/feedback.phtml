<!-- START of: finna - record/feedback.phtml -->
<?php
  $user = $this->auth()->isLoggedIn();
?>
<h2><?= $this->transEsc('Send feedback on record'); ?></h2>

<?php if (!$this->translationEmpty('record_feedback_instructions')): ?>
  <p><?=$this->transEsc("record_feedback_instructions"); ?></p>
<?php endif; ?>

<?=$this->flashmessages()?>
  <form class="form feedback-form" method="post" name="feedbackRecord" action="<?= $this->recordLink()->getActionUrl($this->driver, 'Feedback') ?>">
    <div>
      <input type="hidden" name="id" value="<?= $this->escapeHtmlAttr($this->driver->getUniqueId()) ?>" />
      <div class="form-group">
        <div class="feedback-info">
          <label for="feedback_from" class="control-label">
            <?php if (!$this->translationEmpty('feedback_record_instructions_html')): ?>
              <?=$this->translate("feedback_record_instructions_html"); ?> <br />
            <?php endif; ?>
            <?php if (!$this->translationEmpty('feedback_recipient_info_record')): ?>
              <?=$this->transEsc('feedback_recipient_info_record', ['%%institution%%' => $this->organisationDisplayName($this->driver, true)]); ?>
            <?php endif; ?>
            <?php if (!($dataSourceInfo = $this->translationEmpty('feedback_recipient_info_record_' . $this->driver->getDataSource() . '_html'))): ?>
              <span class="datasource-info"><?=$this->translate('feedback_recipient_info_record_' . $this->driver->getDataSource() . '_html'); ?></span>
            <?php endif; ?>
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="feedback_from" class="control-label">* <?= $this->transEsc('email_from'); ?>:</label>
      <div>
        <input id="feedback_from" type="text" name="from" size="37" class="form-control" required aria-required="true" value="<?=isset($user->email) ? $user->email : '' ?>" />
      </div>
    </div>
    <div class="form-group">
      <label for="feedback_message" class="control-label">* <?= $this->transEsc('feedback_message'); ?>:</label>
      <div>
        <textarea id="feedback_message" name="feedback_message" rows="3" cols="35" class="form-control" required aria-required="true"></textarea>
      </div>
    </div>
    <div class="form-group">
        <input class="btn btn-primary" type="submit" name="submitFeedback" value="<?= $this->transEsc('Send'); ?>"/>
    </div>
  </form>
<!-- END of: finna - record/feedback.phtml -->
